<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سوالات صمیمی و چالشی برای زوج‌ها</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Vazir', Arial, sans-serif;
            background-color: #e6f0fa; /* آبی روشن */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
        }
        .container {
            background-color: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            max-width: 600px;
            width: 90%;
        }
        #question, #welcome {
            font-size: 1.4em;
            margin: 0 0 25px;
            color: #1e3a8a; /* آبی تیره */
            line-height: 1.5;
        }
        .input-container {
            margin-bottom: 20px;
        }
        input, select {
            padding: 10px;
            border: 1px solid #b0c4de; /* خاکستری-آبی روشن */
            border-radius: 8px;
            font-size: 1em;
            margin: 5px;
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        button {
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: transform 0.2s, background-color 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        #yes, #startQuiz {
            background-color: #3b82f6; /* آبی متوسط */
            color: #fff;
        }
        #no {
            background-color: #6b7280; /* خاکستری تیره */
            color: #fff;
        }
        #progress {
            margin-top: 20px;
            font-size: 0.9em;
            color: #4b5563; /* خاکستری متوسط */
        }
        #result {
            display: none;
            font-size: 1.1em;
            color: #1e3a8a;
            margin-top: 20px;
            text-align: right;
            line-height: 1.6;
        }
        #result h3 {
            margin-bottom: 15px;
            color: #3b82f6;
        }
        #chartContainer {
            margin-top: 20px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        #analysis {
            margin-top: 20px;
            font-size: 1em;
            color: #1e3a8a;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="welcome">
            <div class="input-container">
                <label for="name">اسمت چیه؟</label><br>
                <input type="text" id="name" placeholder="اسم خودتو بنویس" required>
            </div>
            <div class="input-container">
                <label for="gender">جنسیتت چیه؟</label><br>
                <select id="gender" required>
                    <option value="" disabled selected>انتخاب کن</option>
                    <option value="مرد">مرد</option>
                    <option value="زن">زن</option>
                </select>
            </div>
            <button id="startQuiz" onclick="startQuiz()">شروع بازی!</button>
        </div>
        <div id="quiz" style="display: none;">
            <div id="question">برای شروع، روی یکی از دکمه‌ها کلیک کن!</div>
            <div class="buttons">
                <button id="yes" onclick="answer('بله')">بله</button>
                <button id="no" onclick="answer('خیر')">خیر</button>
            </div>
            <div id="progress">سوال ۰ از ۱۰</div>
            <div id="result">
                <h3>نتایج پاسخ‌های تو:</h3>
                <div id="chartContainer">
                    <canvas id="responseChart"></canvas>
                </div>
                <div id="analysis"></div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            "آیا با امتحان کردن فانتزی‌های اروتیک شریکت موافقی؟",
            "آیا برات جذابه که تو مکان‌های عجیب و غریب رابطه جنسی داشته باشی؟",
            "آیا با شریکت درباره تجربه‌های جنسی قبلیت کاملاً صادقی؟",
            "آیا موافقی زوج‌ها از اسباب‌بازی‌های جنسی استفاده کنن؟",
            "فکر می‌کنی پیش‌نوازی طولانی واسه رابطه جنسی لازمه؟",
            "آیا با شریکت درباره تماشای فیلم اروتیک باهم مشکلی نداری؟",
            "برات مهمه که شریکت درباره فانتزی‌های سکسی‌ش صریح حرف بزنه؟",
            "آیا با نقش‌بازی‌های اروتیک (مثل معلم و شاگرد) حال می‌کنی؟",
            "فکر می‌کنی رضایت جنسی مهم‌ترین بخش زندگی مشترکه؟",
            "آیا با شریکت درباره پوشیدن لباس‌های سکسی تو رابطه حرف زدی؟",
            "موافقی زوج‌ها باید درباره تعداد دفعات سکس توافق کنن؟",
            "برات جذابه که تو فضای باز سکس رو تجربه کنی؟",
            "آیا با شریکت درباره پوزیشن‌های جنسی مورد علاقه‌ات حرف زدی؟",
            "فکر می‌کنی زوج‌ها باید درباره فانتزی‌های ممنوعه‌شون حرف بزنن؟",
            "آیا با بستن یا محدودیت‌های ملایم تو سکس موافقی؟",
            "برات مهمه که شریکت درباره نیازهای سکسی‌ش صریح باشه؟",
            "آیا با شرکت تو کارگاه‌های آموزش مسائل جنسی موافقی؟",
            "فکر می‌کنی زوج‌ها باید درباره میزان صمیمیت فیزیکی توافق کنن؟",
            "آیا با شریکت درباره استفاده از عطرهای اروتیک حرف زدی؟",
            "موافقی زوج‌ها باید درباره تعداد دفعات سکس باز حرف بزنن؟",
            "برات جذابه که سکس تو زمان‌های غیرمنتظره رو امتحان کنی؟",
            "آیا با بازی‌های اروتیک مثل تاس جنسی حال می‌کنی؟",
            "فکر می‌کنی زوج‌ها باید مرتب درباره فانتزی‌های سکسی‌شون حرف بزنن؟",
            "آیا با شریکت درباره راحتی با لمس‌های اروتیک حرف زدی؟",
            "موافقی زوج‌ها باید درباره مرزهای جنسی‌شون شفاف باشن؟",
            "برات مهمه که شریکت درباره لذت‌های جنسی‌ش بازخورد بده؟",
            "آیا با سکس تو حموم یا وان حال می‌کنی؟",
            "فکر می‌کنی زوج‌ها باید درباره استفاده از موسیقی تو سکس توافق کنن؟",
            "آیا با شریکت درباره اهمیت بوسه‌های عاشقانه تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره صراحت تو فانتزی‌ها حرف بزنن؟",
            "برات جذابه که تو یه هتل لاکچری سکس رو تجربه کنی؟",
            "آیا با نورپردازی خاص (مثل شمع) تو سکس موافقی؟",
            "فکر می‌کنی زوج‌ها باید درباره میزان ماجراجویی جنسی توافق کنن؟",
            "آیا با شریکت درباره فانتزی‌های گروهی (فقط تو ذهن) حرف زدی؟",
            "موافقی زوج‌ها باید درباره سلامت جنسی‌شون صریح باشن؟",
            "برات مهمه که شریکت درباره نیازهای عاطفی تو سکس حرف بزنه؟",
            "آیا با ماساژهای اروتیک با شریکت حال می‌کنی؟",
            "فکر می‌کنی زوج‌ها باید بدون قضاوت درباره فانتزی‌هاشون حرف بزنن؟",
            "آیا با شریکت درباره روش‌های پیشگیری حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو فضای عمومی حرف بزنن؟",
            "برات جذابه که تو ماشین سکس رو تجربه کنی؟",
            "آیا با شریکت درباره اهمیت پیش‌نوازی عاطفی حرف زدی؟",
            "موافقی زوج‌ها باید درباره تنوع تو سکس توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره فانتزی‌های اروتیک‌شون کتاب بخونن؟",
            "آیا با بازی‌های اروتیک با کارت‌های جنسی حال می‌کنی؟",
            "برات مهمه که شریکت درباره لذت‌های خاصش با تو حرف بزنه؟",
            "آیا با شریکت درباره استفاده از آینه تو اتاق خواب حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با حرف‌های اروتیک توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره فانتزی‌هاشون فیلم ببینن؟",
            "آیا با سکس تو طبیعت (مثل جنگل) حال می‌کنی؟",
            "برات مهمه که شریکت درباره میزان رضایت جنسی‌ش صادق باشه؟",
            "آیا با شریکت درباره دوش مشترک تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره ماجراجویی تو فانتزی‌ها توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس صبحگاهی حرف بزنن؟",
            "آیا با بازی‌های اروتیک با چشمای بسته حال می‌کنی؟",
            "برات مهمه که شریکت درباره فانتزی‌های ممنوعه‌ش حرف بزنه؟",
            "آیا با شریکت درباره استفاده از شکلات تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با بوسه‌های عمیق حرف بزنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس شبانه حرف بزنن؟",
            "آیا با سکس با لباس‌های خاص (مثل لباس زیر سکسی) حال می‌کنی؟",
            "برات مهمه که شریکت بدون خجالت درباره فانتزی‌هاش حرف بزنه؟",
            "آیا با شریکت درباره عطرهای اروتیک تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو سفر توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره تنوع تو پیش‌نوازی حرف بزنن؟",
            "آیا با بازی‌های اروتیک با داستان‌سرایی حال می‌کنی؟",
            "برات مهمه که شریکت درباره نیازهای جنسی‌ش تو موقعیت‌های خاص حرف بزنه؟",
            "آیا با شریکت درباره شمع‌های معطر تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با لمس‌های غیرمنتظره توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو تعطیلات حرف بزنن؟",
            "آیا با سکس با موسیقی خاص حال می‌کنی؟",
            "برات مهمه که شریکت درباره فانتزی‌های عاشقانه‌ش حرف بزنه؟",
            "آیا با شریکت درباره استفاده از یخ تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس سریع توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس صبح زود حرف بزنن؟",
            "آیا با بازی‌های اروتیک با چالش‌های کوچیک حال می‌کنی؟",
            "برات مهمه که شریکت درباره رضایت از پیش‌نوازی حرف بزنه؟",
            "آیا با شریکت درباره پوزیشن‌های جدید به‌صورت منظم حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو فضای عمومی حرف بزنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو موقعیت‌های استرس‌زا حرف بزنن؟",
            "آیا با سکس با لباس‌های فانتزی حال می‌کنی؟",
            "برات مهمه که شریکت درباره فانتزی‌هاش تو موقعیت‌های خاص حرف بزنه؟",
            "آیا با شریکت درباره استفاده از پر تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس صبحگاهی توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو تعطیلات آخر هفته حرف بزنن؟",
            "آیا با بازی‌های اروتیک با محدودیت‌های کوچیک حال می‌کنی؟",
            "برات مهمه که شریکت درباره نیازهای جنسی‌ش تو سفر حرف بزنه؟",
            "آیا با شریکت درباره شکلات یا خامه تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو فضای باز توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو موقعیت‌های عاشقانه حرف بزنن؟",
            "آیا با سکس با نورپردازی کم حال می‌کنی؟",
            "برات مهمه که شریکت درباره فانتزی‌هاش تو موقعیت‌های غیرمنتظره حرف بزنه؟",
            "آیا با شریکت درباره روغن‌های ماساژ اروتیک حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو موقعیت‌های خاص توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو موقعیت‌های رمانتیک حرف بزنن؟",
            "آیا با بازی‌های اروتیک با داستان‌های عاشقانه حال می‌کنی؟",
            "برات مهمه که شریکت درباره نیازهای جنسی‌ش تو موقعیت‌های عاشقانه حرف بزنه؟",
            "آیا با شریکت درباره موسیقی عاشقانه تو سکس حرف زدی؟",
            "موافقی زوج‌ها باید درباره راحتی با سکس تو موقعیت‌های غیرعادی توافق کنن؟",
            "فکر می‌کنی زوج‌ها باید درباره اهمیت سکس تو موقعیت‌های خاص حرف بزنن؟",
            "آیا با سکس با چشمای بسته حال می‌کنی؟",
            "برات مهمه که شریکت درباره فانتزی‌هاش تو موقعیت‌های رمانتیک حرف بزنه؟"
        ];

        const personalityAnalyses = [
            // بسیار باز (opennessScore >= ۸۰)
            "هی {name}، تو یه آدم حسابی حشری هستی! عاشق اینی که هر چیزی رو تو سکس امتحان کنی و کون‌کونکت می‌شه وقتی فانتزی‌های جدید رو کشف می‌کنی!",
            "وای {name}، تو خیلی کیرت راسته! تو رابطه جنسی مثل یه کاوشگره که دنبال ماجراجویی‌های داغه و هیچی جلودارت نیست!",
            "آخ {name}، تو یه بکن در رو هستی! از هر چیزی که رابطه‌تو پرهیجان کنه استقبال می‌کنی و همیشه آماده‌ای یه چیز جدید رو تست کنی!",
            "اوف {name}، تو یه آدم کیر به دست تمام‌عیاری! عاشق تنوع و خلاقیت تو سکس هستی و شریکت باید حسابی حواسش بهت باشه!",
            "هی {name}، تو که حسابی لاشی هستی تو مسائل جنسی! از کشف فانتزی‌های عجیب و غریب لذت می‌بری و رابطه‌ت همیشه پر از هیجانه!",
            "وای {name}، تو یه ماشین جنسی تمام‌عیاری! هیچ فانتزی‌ای برات زیادی عجیب نیست و همیشه دنبال راه‌های جدید برای حال کردنی!",
            "{name}، تو یه آتش‌پاره سکسی هستی! از تجربه‌های جسورانه و گفت‌وگوهای بی‌پرده تو سکس لذت می‌بری و رابطه‌ت همیشه داغه!",
            "اوف {name}، تو یه جونور سکسی هستی! عاشق اینی که شریکت رو با فانتزی‌های جدید غافلگیر کنی و همیشه یه چیز تازه رو میزی!",
            "هی {name}، تو که خیلی کیرت راسته تو سکس! از ماجراجویی‌های اروتیک استقبال می‌کنی و رابطه‌ت همیشه پر از شور و هیجانه!",
            "{name}، تو یه استاد ماجراجویی جنسی هستی! هیچی نمی‌تونه جلوی کنجکاوی‌ات رو بگیره و رابطه‌ت همیشه یه سورپرایز جدید داره!",
            // باز (opennessScore >= ۶۰)
            "{name}، تو یه جورایی حشری متعادلی! از تجربه‌های جدید تو سکس حال می‌کنی، ولی یه کم حواست به چارچوب‌ها هم هست.",
            "هی {name}، تو یه آدم کیر به دست باکلاسی! از ماجراجویی جنسی لذت می‌بری، ولی همیشه یه خط قرمز داری که رعایتش می‌کنی.",
            "{name}، تو یه بکن در رو با احتیاطی! عاشق تنوع تو رابطه جنسی هستی، ولی با یه مقدار برنامه‌ریزی و توافق با شریکت.",
            "اوف {name}، تو یه لاشی متعادل هستی! از فانتزی‌های جدید استقبال می‌کنی، ولی همیشه به راحتی شریکت هم فکر می‌کنی.",
            "{name}، تو یه آدم کیرت راسته، ولی با سیاست! از گفت‌وگوهای سکسی لذت می‌بری، ولی با یه مقدار احتیاط پیش می‌ری.",
            "هی {name}، تو یه جونور سکسی با چارچوبی! از تجربه‌های جدید تو سکس حال می‌کنی، ولی همیشه به توافق با شریکت اهمیت می‌دی.",
            "{name}، تو یه آتش‌پاره با کنترل هستی! عاشق ماجراجویی تو رابطه جنسی هستی، ولی یه مقدار محتاط هم هستی.",
            "وای {name}، تو یه آدم کیر به دست با برنامه‌ای! از تنوع تو سکس لذت می‌بری، ولی همیشه یه کم حواست به مرزهاست.",
            "{name}، تو یه استاد سکسی متعادلی! از کشف فانتزی‌های جدید حال می‌کنی، ولی همیشه با احترام به شریکت پیش می‌ری.",
            "هی {name}، تو یه بکن در رو با احتیاطی! از سکس هیجان‌انگیز لذت می‌بری، ولی همیشه یه مقدار فکر شده عمل می‌کنی.",
            // متعادل (opennessScore >= ۴۰)
            "{name}، تو یه آدم متعادل حسابی هستی! نه خیلی حشری هستی، نه خیلی محافظه‌کار. رابطه‌ت یه تعادل خوب بین هیجان و راحتی داره.",
            "هی {name}، تو یه کیر به دست متعادلی! از تجربه‌های جدید تو سکس استقبال می‌کنی، ولی همیشه به احساسات شریکت هم فکر می‌کنی.",
            "{name}، تو یه بکن در رو با تعادل هستی! از تنوع تو رابطه جنسی حال می‌کنی، ولی با یه مقدار احتیاط و برنامه‌ریزی.",
            "اوف {name}، تو یه لاشی متعادل هستی! از گفت‌وگوهای سکسی لذت می‌بری، ولی همیشه یه کم حواست به مرزهاست.",
            "{name}، تو یه آدم کیرت راسته، ولی با احتیاط! از ماجراجویی‌های جنسی استقبال می‌کنی، ولی همیشه به راحتی شریکت اهمیت می‌دی.",
            "هی {name}، تو یه جونور سکسی متعادلی! از تجربه‌های جدید حال می‌کنی، ولی همیشه یه کم با فکر پیش می‌ری.",
            "{name}، تو یه آتش‌پاره با کنترل هستی! از تنوع تو سکس لذت می‌بری، ولی همیشه به توافق با شریکت پایبندی.",
            "وای {name}، تو یه آدم کیر به دست باکلاسی! از گفت‌وگوهای صمیمی حال می‌کنی، ولی همیشه یه مقدار محتاط هم هستی.",
            "{name}، تو یه استاد سکسی متعادلی! از کشف فانتزی‌ها لذت می‌بری، ولی همیشه به احساسات شریکت هم اهمیت می‌دی.",
            "هی {name}، تو یه بکن در رو با تعادل هستی! از سکس هیجان‌انگیز حال می‌کنی، ولی همیشه یه کم با برنامه پیش می‌ری.",
            // محتاط (opennessScore >= ۲۰)
            "{name}، تو یه آدم محتاط حسابی هستی! تو سکس بیشتر دنبال راحتی و امنیت هستی، ولی گاهی یه کم حشری می‌شی!",
            "هی {name}، تو یه کیر به دست محتاطی! از تجربه‌های جدید تو سکس استقبال می‌کنی، ولی بیشتر تو محدوده امن خودت می‌مونی.",
            "{name}، تو یه بکن در رو با احتیاطی! از گفت‌وگوهای صمیمی حال می‌کنی، ولی همیشه با یه مقدار فکر و احتیاط پیش می‌ری.",
            "اوف {name}، تو یه لاشی محتاط هستی! از سکس لذت می‌بری، ولی ترجیح می‌دی تو یه فضای امن و آشنا باشی.",
            "{name}، تو یه آدم کیرت راسته، ولی محتاط! از تنوع تو رابطه جنسی استقبال می‌کنی، ولی همیشه با احتیاط پیش می‌ری.",
            "هی {name}، تو یه جونور سکسی محتاطی! از گفت‌وگوهای صمیمی لذت می‌بری، ولی همیشه یه کم حواست به مرزهاست.",
            "{name}، تو یه آتش‌پاره با احتیاطی! از تجربه‌های جدید تو سکس حال می‌کنی، ولی همیشه به امنیت شریکت هم فکر می‌کنی.",
            "وای {name}، تو یه آدم کیر به دست با برنامه‌ای! از سکس لذت می‌بری، ولی ترجیح می‌دی تو یه فضای امن باشی.",
            "{name}، تو یه استاد سکسی محتاطی! از گفت‌وگوهای صمیمی حال می‌کنی، ولی همیشه با احترام به مرزهای شریکت پیش می‌ری.",
            "هی {name}، تو یه بکن در رو محتاطی! از سکس هیجان‌انگیز لذت می‌بری، ولی همیشه با فکر و برنامه پیش می‌ری.",
            // بسیار محافظه‌کار (opennessScore < ۲۰)
            "{name}، تو یه آدم حسابی محافظه‌کاری! تو سکس دنبال امنیت و راحتی هستی و زیاد حشری نمی‌شی، ولی اینم جذابه!",
            "هی {name}، تو یه کیر به دست خیلی محتاطی! ترجیح می‌دی تو سکس تو یه فضای کاملاً امن و آشنا بمونی.",
            "{name}، تو یه بکن در رو خیلی محافظه‌کاری! از گفت‌وگوهای صمیمی لذت می‌بری، ولی همیشه با کلی احتیاط پیش می‌ری.",
            "اوف {name}، تو یه لاشی خیلی محتاطی! از سکس تو یه فضای امن و قابل پیش‌بینی حال می‌کنی.",
            "{name}، تو یه آدم کیرت راسته، ولی خیلی محافظه‌کار! از تنوع استقبال می‌کنی، ولی فقط تو محدوده امن خودت.",
            "هی {name}، تو یه جونور سکسی خیلی محتاطی! از گفت‌وگوهای صمیمی لذت می‌بری، ولی ترجیح می‌دی با کلی فکر پیش بری.",
            "{name}، تو یه آتش‌پاره خیلی محافظه‌کاری! از سکس لذت می‌بری، ولی همیشه تو یه فضای امن و راحت می‌مونی.",
            "وای {name}، تو یه آدم کیر به دست خیلی محافظه‌کاری! از گفت‌وگوهای صمیمی حال می‌کنی، ولی همیشه با احتیاط پیش می‌ری.",
            "{name}، تو یه استاد سکسی خیلی محافظه‌کاری! از سکس تو یه فضای امن لذت می‌بری و به راحتی شریکت اهمیت می‌دی.",
            "هی {name}، تو یه بکن در رو خیلی محافظه‌کاری! از سکس لذت می‌بری، ولی ترجیح می‌دی همیشه تو یه فضای امن و آشنا باشی."
        ];

        let currentQuestionIndex = 0;
        let selectedQuestions = [];
        let answers = [];
        let chartInstance = null;
        let userName = '';
        let userGender = '';

        function startQuiz() {
            userName = document.getElementById('name').value.trim();
            userGender = document.getElementById('gender').value;
            if (!userName || !userGender) {
                alert('لطفاً اسم و جنسیتت رو وارد کن!');
                return;
            }
            document.getElementById('welcome').style.display = 'none';
            document.getElementById('quiz').style.display = 'block';
            selectedQuestions = shuffleArray([...questions]).slice(0, 10);
            currentQuestionIndex = 0;
            answers = [];
            document.getElementById('result').style.display = 'none';
            showQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showQuestion() {
            if (currentQuestionIndex < 10) {
                document.getElementById('question').innerText = selectedQuestions[currentQuestionIndex];
                document.getElementById('progress').innerText = `سوال ${toPersianDigits(currentQuestionIndex + 1)} از ۱۰`;
            } else {
                showResults();
            }
        }

        function toPersianDigits(num) {
            const persianDigits = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
            return num.toString().replace(/\d/g, (d) => persianDigits[d]);
        }

        function analyzePersonality() {
            const yesCount = answers.filter(a => a.answer === 'بله').length;
            const opennessScore = (yesCount / 10) * 100;

            // محاسبه تعداد پاسخ‌های «بله» به سوالات مرتبط با ماجراجویی
            const adventureQuestions = [
                "آیا برات جذابه که تو مکان‌های عجیب و غریب رابطه جنسی داشته باشی؟",
                "آیا با نقش‌بازی‌های اروتیک (مثل معلم و شاگرد) حال می‌کنی؟",
                "آیا برات جذابه که تو فضای باز سکس رو تجربه کنی؟",
                "آیا با سکس تو حموم یا وان حال می‌کنی؟",
                "آیا برات جذابه که تو ماشین سکس رو تجربه کنی؟"
            ];
            const adventureYesCount = answers.filter(a => adventureQuestions.includes(a.question) && a.answer === 'بله').length;

            // محاسبه تعداد پاسخ‌های «بله» به سوالات مرتبط با صراحت
            const opennessQuestions = [
                "آیا با شریکت درباره تجربه‌های جنسی قبلیت کاملاً صادقی؟",
                "آیا برات مهمه که شریکت درباره فانتزی‌های سکسی‌ش صریح حرف بزنه؟",
                "آیا برات مهمه که شریکت درباره نیازهای سکسی‌ش صریح باشه؟",
                "آیا برات مهمه که شریکت درباره لذت‌های جنسی‌ش بازخورد بده؟",
                "آیا برات مهمه که شریکت بدون خجالت درباره فانتزی‌هاش حرف بزنه؟"
            ];
            const opennessYesCount = answers.filter(a => opennessQuestions.includes(a.question) && a.answer === 'بله').length;

            let analysisPool = [];
            if (opennessScore >= 80) {
                analysisPool = personalityAnalyses.slice(0, 10); // بسیار باز
            } else if (opennessScore >= 60) {
                analysisPool = personalityAnalyses.slice(10, 20); // باز
            } else if (opennessScore >= 40) {
                analysisPool = personalityAnalyses.slice(20, 30); // متعادل
            } else if (opennessScore >= 20) {
                analysisPool = personalityAnalyses.slice(30, 40); // محتاط
            } else {
                analysisPool = personalityAnalyses.slice(40, 50); // بسیار محافظه‌کار
            }

            // انتخاب تصادفی از تحلیل‌های مرتبط
            const randomIndex = Math.floor(Math.random() * analysisPool.length);
            let analysis = analysisPool[randomIndex].replace('{name}', userName);

            // افزودن جزئیات به تحلیل بر اساس پاسخ‌های خاص
            if (adventureYesCount >= 3) {
                analysis += ` به نظر می‌رسه حسابی دنبال ماجراجویی‌های داغی، ${userName}! تو موقعیت‌های عجیب و غریب کون‌کونکت می‌شه و شریکت باید آماده باشه!`;
            } else if (adventureYesCount <= 1) {
                analysis += ` انگار تو سکس بیشتر دنبال یه جای امن و راحت هستی، ${userName}. زیاد دنبال ماجراجویی‌های عجیب نیستی، ولی اینم جذابه!`;
            }
            if (opennessYesCount >= 3) {
                analysis += ` تو گفت‌وگوهای سکسی حسابی کیرت راسته، ${userName}! عاشق اینی که شریکت همه‌چیزو بی‌پرده بگه و خودتم همین‌جوری هستی.`;
            } else if (opennessYesCount <= 1) {
                analysis += ` انگار تو گفت‌وگوهای سکسی یه کم محتاطی، ${userName}. ترجیح می‌دی یه کم آروم‌تر درباره فانتزی‌ها حرف بزنی.`;
            }

            return analysis;
        }

        function showResults() {
            const yesCount = answers.filter(a => a.answer === 'بله').length;
            const noCount = 10 - yesCount;

            if (chartInstance) {
                chartInstance.destroy();
            }

            const ctx = document.getElementById('responseChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['بله', 'خیر'],
                    datasets: [{
                        data: [yesCount, noCount],
                        backgroundColor: ['#3b82f6', '#6b7280'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    family: 'Vazir',
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });

            document.getElementById('result').style.display = 'block';
            document.getElementById('analysis').innerText = analyzePersonality();
            document.getElementById('question').innerText = 'سوالات تموم شد!';
            document.getElementById('progress').innerText = '';
        }

        function answer(response) {
            if (currentQuestionIndex < 10) {
                answers.push({ question: selectedQuestions[currentQuestionIndex], answer: response });
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        }
    </script>
</body>
</html>
